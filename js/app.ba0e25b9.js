(function(t){function e(e){for(var s,a,r=e[0],c=e[1],u=e[2],l=0,f=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},o={app:0},i=[];function a(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"94b5ffac"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,s){n=o[t]=[e,s]}));e.push(n[2]=s);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=a(t);var u=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=o[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",u.name="ChunkLoadError",u.type=s,u.request=i,n[1](u)}o[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/bsas-transit-front/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0361":function(t,e,n){},"31aa":function(t,e,n){"use strict";n("a586")},4250:function(t,e,n){"use strict";n("f6c9")},"43d7":function(t,e,n){t.exports=n.p+"img/bondilogo.0ee9f2f3.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s,o,i,a,r=n("2b0e"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("b-navbar",{attrs:{type:"is-light"},scopedSlots:t._u([{key:"brand",fn:function(){return[s("b-navbar-item",[s("img",{attrs:{src:n("43d7")}})])]},proxy:!0},{key:"start",fn:function(){return[s("b-navbar-item",{staticStyle:{"border-left":"2px solid rgba(0,0,0,0.1)"},attrs:{href:"#"},on:{click:function(e){t.sectionIndex=0}}},[t._v(" Recorridos ")]),s("b-navbar-item",{attrs:{href:"#"},on:{click:function(e){t.sectionIndex=1}}},[t._v(" Como llegar ")]),s("b-navbar-item",{attrs:{href:"#"},on:{click:function(e){t.sectionIndex=2}}},[t._v(" Información ")])]},proxy:!0}])}),s("Home",{attrs:{sectionIndex:t.sectionIndex},on:{"update:sectionIndex":function(e){t.sectionIndex=e},"update:section-index":function(e){t.sectionIndex=e}}})],1)},u=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"home columns is-gapless is-padingless"},[n("div",{staticClass:"column is-3 sidebar"},[n("RoutesSection",{directives:[{name:"show",rawName:"v-show",value:0==t.sectionIndex,expression:"sectionIndex == 0"}],staticClass:"p-2 pt-4",on:{select:function(e){return t.selectedRoutes=e}}}),n("ItinerarySection",{directives:[{name:"show",rawName:"v-show",value:1==t.sectionIndex,expression:"sectionIndex == 1"}],staticClass:"p-2 pt-4",attrs:{startPos:t.startPos,endPos:t.endPos},on:{"update:startPos":function(e){t.startPos=e},"update:start-pos":function(e){t.startPos=e},"update:endPos":function(e){t.endPos=e},"update:end-pos":function(e){t.endPos=e},"update:selectedItinerary":function(e){t.selectedItinerary=e}}}),n("InformationSection",{directives:[{name:"show",rawName:"v-show",value:2==t.sectionIndex,expression:"sectionIndex == 2"}],staticClass:"p-2 pt-4",attrs:{infoPos:t.infoPos},on:{"update:infoPos":function(e){t.infoPos=e},"update:info-pos":function(e){t.infoPos=e}}})],1),n("div",{staticClass:"column map-container "},[n("Map",{attrs:{startPos:t.startPos,endPos:t.endPos,infoPos:t.infoPos},on:{"update:startPos":function(e){t.startPos=e},"update:start-pos":function(e){t.startPos=e},"update:endPos":function(e){t.endPos=e},"update:end-pos":function(e){t.endPos=e},"update:infoPos":function(e){t.infoPos=e},"update:info-pos":function(e){t.infoPos=e},rightclick:function(e){return t.$refs.menu.open(e.event,e.data)}},scopedSlots:t._u([{key:"routes",fn:function(){return[n("MapRoutes",{attrs:{routes:t.selectedRoutes}})]},proxy:!0},{key:"itinerary",fn:function(){return[n("MapItinerary",{attrs:{itinerary:t.selectedItinerary}})]},proxy:!0}])})],1)]),n("ContextMenu",{ref:"menu",attrs:{id:"menu"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.contextData;return[n("ContextMenuItem",{nativeOn:{click:function(e){return t.setStartPosMenu(s)}}},[t._v(" Marcar ubicación de partida ")]),n("ContextMenuItem",{nativeOn:{click:function(e){return t.setEndPosMenu(s)}}},[t._v(" Marcar ubicación de destino ")]),n("ContextMenuItem",{nativeOn:{click:function(e){return t.setInfoPosMenu(s)}}},[t._v(" Mas información... ")]),n("ContextMenuItem",{nativeOn:{click:function(e){return t.clearAll(e)}}},[t._v(" Limpiar puntos marcados ")])]}}])})],1)},d=[],f=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"},{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],ref:"popper",staticClass:"context-menu",attrs:{tabindex:"-1"},on:{"!contextmenu":function(t){t.preventDefault()}}},[n("ul",[t._t("default",null,{contextData:t.contextData})],2)])}),p=[],h=n("f0bd"),m=n("e67d"),v=n.n(m),b={props:{boundariesElement:{type:String,default:"body"}},components:{},data:function(){return{opened:!1,contextData:{}}},directives:{ClickOutside:v.a},computed:{isVisible:function(){return this.opened}},methods:{open:function(t,e){var n=this;this.opened=!0,this.contextData=e,this.popper&&this.popper.destroy(),this.popper=new h["a"](this.referenceObject(t),this.$refs.popper,{placement:"right-start",modifiers:{preventOverflow:{boundariesElement:document.querySelector(this.boundariesElement)}}}),this.$nextTick((function(){n.popper.scheduleUpdate()}))},close:function(){this.opened=!1,this.contextData=null},referenceObject:function(t){var e=t.clientX,n=t.clientY,s=e+1,o=n+1,i=1,a=1;function r(){return{left:e,top:n,right:s,bottom:o}}var c={getBoundingClientRect:r,clientWidth:i,clientHeight:a};return c}},beforeDestroy:function(){void 0!==this.popper&&this.popper.destroy()}},g=b,y=(n("602a"),n("2877")),_=Object(y["a"])(g,f,p,!1,null,"082a31a9",null),C=_.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"context-menu-item"},[t._t("default")],2)},L=[],P={},S=P,w=(n("31aa"),Object(y["a"])(S,x,L,!1,null,"358a0982",null)),k=w.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("l-map",{attrs:{zoom:t.zoom,center:t.center,options:t.mapOptions},on:{"update:center":t.centerUpdate,"update:zoom":t.zoomUpdate,contextmenu:t.onRightClick}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),n("CustomIconMarker",{attrs:{color:"blue",iconClass:"mdi-alpha-a",iconColor:"blue"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.customIcon;return t.startPos.lat&&t.startPos.lng?n("l-marker",{attrs:{icon:s,"lat-lng":t.startPos,visible:"",draggable:""},on:{dragend:function(e){return t.$emit("update:startPos",e.target._latlng)}}}):t._e()}}],null,!0)}),n("CustomIconMarker",{attrs:{color:"blue",iconClass:"mdi-alpha-b",iconColor:"blue"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.customIcon;return t.endPos.lat&&t.endPos.lng?n("l-marker",{attrs:{icon:s,"lat-lng":t.endPos,visible:"",draggable:""},on:{dragend:function(e){return t.$emit("update:endPos",e.target._latlng)}}}):t._e()}}],null,!0)}),n("CustomIconMarker",{attrs:{color:"purple",iconClass:"mdi-information-variant",iconColor:"purple"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.customIcon;return t.infoPos.lat&&t.infoPos.lng?n("l-marker",{attrs:{icon:s,"lat-lng":t.infoPos,visible:"",draggable:""},on:{dragend:function(e){return t.$emit("update:infoPos",e.target._latlng)}}}):t._e()}}],null,!0)}),t._t("routes"),t._t("itinerary")],2)},I=[],O=n("e11e"),$=n("2699"),E=n("a40a"),T=n("4e2b"),j=(n("99af"),{props:{color:{type:String,default:"black"},iconClass:{type:String,default:"mdi-bell"},iconColor:{type:String,default:"black"}},computed:{icon:function(){return Object(O["divIcon"])({className:"custom-div-icon",html:"<div style='background-color:".concat(this.color,";' class='marker-pin'></div>\n        <i class='mdi ").concat(this.iconClass,"' style='color: ").concat(this.iconColor,"'></i>"),iconSize:[30,42],iconAnchor:[15,42]})}},render:function(){return this.$scopedSlots.default({customIcon:this.icon})}}),M=j,D=(n("a1a3"),Object(y["a"])(M,s,o,!1,null,null,null)),A=D.exports,B={name:"Map",components:{LMap:$["a"],LTileLayer:E["a"],LMarker:T["a"],CustomIconMarker:A},props:{startPos:{type:Object,default:function(){return{}}},endPos:{type:Object,default:function(){return{}}},infoPos:{type:Object,default:function(){return{}}}},data:function(){return{zoom:12,center:Object(O["latLng"])(-34.6,-58.45),url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',currentZoom:12,currentCenter:Object(O["latLng"])(-34.6,-58.45),mapOptions:{zoomSnap:.25,doubleClickZoom:!1}}},computed:{},methods:{zoomUpdate:function(t){this.currentZoom=t},centerUpdate:function(t){this.currentCenter=t},coordsToLatLngs:function(t){return O["GeoJSON"].coordsToLatLngs(t)},onRightClick:function(t){this.$emit("rightclick",{event:t.originalEvent,data:t.latlng})}}},z=B,F=(n("b2cf"),Object(y["a"])(z,R,I,!1,null,null,null)),V=F.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.routes,(function(e){return["bus"==e.type?n("l-polyline",{key:e.uniqueRouteId,attrs:{"lat-lngs":t.coordsToLatLngs(e.path.coordinates),color:e.returnDirection?"blue":"red",weight:5}}):t._e(),"train"==e.type?n("l-polyline",{key:e.uniqueRouteId,attrs:{"lat-lngs":t.coordsToLatLngs(e.path.coordinates),color:"purple",weight:5}}):t._e(),"subway"==e.type?[n("l-polyline",{key:e.uniqueRouteId,attrs:{"lat-lngs":t.coordsToLatLngs(e.path.coordinates),color:"#"+e.color,weight:7}}),t._l(e.stops,(function(s){return n("StationMarker",{key:s.code,attrs:{color:"#"+e.color,iconClass:"mdi-subway-variant",iconColor:"#"+e.color},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.customIcon;return n("l-marker",{attrs:{icon:e,"lat-lng":[s.location.coordinates[1],s.location.coordinates[0]],visible:""}})}}],null,!0)})}))]:t._e()]}))],2)},U=[],q=n("635f"),H={props:{color:{type:String,default:"#000000"},iconClass:{type:String,default:"mdi-bus"},iconColor:{type:String,default:"#000000"}},computed:{icon:function(){return Object(O["divIcon"])({className:"subway-custom-div-icon",html:'<div class="icon-scaled"><div style=\'border-color:'.concat(this.color,"; background:").concat(this.backgroundColor,";' class='subway-marker-pin'></div>\n          <i class='mdi ").concat(this.iconClass,"' style='color: ").concat(this.iconColor,"'></i></div>"),iconSize:[30,30],iconAnchor:[15,30]})},backgroundColor:function(){var t="#"===this.iconColor.charAt(0)?this.iconColor.substring(1,7):this.iconColor,e=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),s=parseInt(t.substring(4,6),16);return.299*e+.587*n+.114*s>200?"#000000":"#ffffff"}},render:function(){return this.$scopedSlots.default({customIcon:this.icon})}},G=H,J=(n("892b"),Object(y["a"])(G,i,a,!1,null,null,null)),K=J.exports,Z={components:{LPolyline:q["a"],LMarker:T["a"],StationMarker:K},props:{routes:{type:Array,default:function(){return[]}}},methods:{coordsToLatLngs:function(t){return O["GeoJSON"].coordsToLatLngs(t)}}},W=Z,X=Object(y["a"])(W,N,U,!1,null,null,null),Y=X.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.itinerary,(function(e,s){return n("div",{key:s},["bus"==e.type?n("l-polyline",{attrs:{"lat-lngs":t.coordsToLatLngs(e.busRoute.path.coordinates),color:"red",weight:8,opacity:.8}}):t._e(),"subway"==e.type?n("l-polyline",{attrs:{"lat-lngs":t.coordsToLatLngs(e.subwayRoute.path.coordinates),color:"#"+e.subwayRoute.color,weight:9,opacity:.8}}):t._e(),n("l-polyline",{key:s,attrs:{"lat-lngs":t.coordsToLatLngs(e.travelPath.coordinates),color:"blue",dashArray:"7"}})],1)})),0)},tt=[],et={components:{LPolyline:q["a"]},props:{itinerary:{type:Array,default:function(){return[]}}},methods:{coordsToLatLngs:function(t){return O["GeoJSON"].coordsToLatLngs(t)}}},nt=et,st=Object(y["a"])(nt,Q,tt,!1,null,null,null),ot=st.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"is-flex is-justify-content-space-evenly"},[n("b-field",[n("b-select",{attrs:{size:"is-small"},on:{input:t.onBusLineSelection},model:{value:t.busValue,callback:function(e){t.busValue=e},expression:"busValue"}},[n("option",{key:"none",staticClass:"is-paddingless",attrs:{value:"none"}},[t._v("Colectivo")]),t._l(t.busLines,(function(e){return n("option",{key:e,staticClass:"is-paddingless",domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2)],1),n("b-field",[n("b-select",{attrs:{size:"is-small"},on:{input:t.onSubwayLineSelection},model:{value:t.subwayValue,callback:function(e){t.subwayValue=e},expression:"subwayValue"}},[n("option",{staticClass:"is-paddingless",attrs:{value:"none"}},[t._v("Subte")]),t._l(t.subwayLines,(function(e){return n("option",{key:e,staticClass:"is-paddingless",domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2)],1),n("b-field",[n("b-select",{attrs:{size:"is-small"},on:{input:t.onTrainLineSelection},model:{value:t.trainValue,callback:function(e){t.trainValue=e},expression:"trainValue"}},[n("option",{key:"none",staticClass:"is-paddingless",attrs:{value:"none"}},[t._v("Tren")]),t._l(t.trainLines,(function(e){return n("option",{key:e,staticClass:"is-paddingless",domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2)],1)],1),n("RoutesCards",{attrs:{routes:t.routes},on:{select:function(e){return t.$emit("select",e)},close:t.deleteRoute}})],1)},at=[],rt=(n("c740"),n("a434"),n("bc3a")),ct=n.n(rt),ut="https://bsas-transport.herokuapp.com",lt=ct.a.create({baseURL:ut}),dt={getLines:function(){return lt.get("/lines")},getLinesCloseTo:function(t,e){return lt.get("/lines?lat=".concat(t,"&lon=").concat(e))},getBusRoutesForLine:function(t){return lt.get("/bus/routes/"+t)},getSubwayRoutesForLine:function(t){return lt.get("/subway/routes/"+t)},getTrainRoutesForLine:function(t){return lt.get("/train/routes/"+t)},getItineraries:function(t,e,n,s,o){return lt.get("/itinerary?startLat=".concat(t,"&startLon=").concat(e,"&endLat=").concat(n,"\n      &endLon=").concat(s,"&distance=").concat(o))}},ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.routes,(function(e){return n("div",{key:e.type+e.line,staticClass:"mb-2"},["bus"==e.type?n("BusRoutesCard",{attrs:{routes:e.routes,line:e.line},on:{select:function(n){return t.changeSelectedRoutes(n,e.type+e.line)},close:function(n){return t.removeLineRoutes(e.type+e.line)}}}):t._e(),"subway"==e.type?n("SubwayRouteCard",{attrs:{route:e.route},on:{select:function(n){return t.changeSelectedRoutes(n,e.type+e.line)},close:function(n){return t.removeLineRoutes(e.type+e.line)}}}):t._e(),"train"==e.type?n("TrainRoutesCard",{attrs:{routes:e.routes,line:e.line},on:{select:function(n){return t.changeSelectedRoutes(n,e.type+e.line)},close:function(n){return t.removeLineRoutes(e.type+e.line)}}}):t._e()],1)})),0)},pt=[],ht=(n("4160"),n("07ac"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-collapse",{staticClass:"card",attrs:{animation:"slide",open:t.isOpen},on:{"update:open":function(e){t.isOpen=e}},scopedSlots:t._u([{key:"trigger",fn:function(e){return[n("div",{staticClass:"card-header",attrs:{role:"button"}},[n("div",{staticClass:"card-header-title"},[n("b-icon",{staticClass:"header-icon",attrs:{icon:e.open?"menu-right":"menu-down"}}),n("span",[t._v(" Colectivo "+t._s(t.line)+" ")])],1),n("a",{staticClass:"card-header-icon",on:{click:function(e){return t.$emit("close")}}},[n("b-icon",{attrs:{icon:"close"}})],1)])]}}])},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},t._l(t.sortedBranch,(function(e){return n("div",{key:e,staticClass:"has-text-left"},[n("div",[n("b",[t._v("Ramal "+t._s(e)+" ")])]),n("div",{staticClass:"is-flex is-flex-direction-column m-1"},t._l(t.routesByBranch[e],(function(e){return n("b-checkbox",{key:e.routeId+e.tripSign,staticClass:"mb-1",attrs:{"native-value":e,size:"is-small"},on:{input:t.onRouteSelection},model:{value:t.selectedRoutes,callback:function(e){t.selectedRoutes=e},expression:"selectedRoutes"}},[n("div",[e.returnDirection?n("strong",[t._v("VUELTA")]):n("strong",[t._v("IDA")]),t._v(" - "+t._s(e.tripSign)+" ")])])})),1)])})),0)])])}),mt=[],vt=(n("b64b"),{props:{routes:{type:Array,default:function(){return[]}},line:{type:String,default:""}},data:function(){return{isOpen:!0,selectedRoutes:[]}},computed:{routesByBranch:function(){var t={};return this.routes.forEach((function(e){Object.prototype.hasOwnProperty.call(t,e.branch)?t[e.branch].push(e):t[e.branch]=[e]})),t},sortedBranch:function(){return Object.keys(this.routesByBranch).sort()}},methods:{onRouteSelection:function(){this.$emit("select",this.selectedRoutes)}},watch:{routes:{immediate:!0,handler:function(){var t=this;this.$nextTick((function(){t.selectedRoutes=[t.routesByBranch[t.sortedBranch[0]][0]],t.onRouteSelection()}))}}}}),bt=vt,gt=(n("fc57"),Object(y["a"])(bt,ht,mt,!1,null,null,null)),yt=gt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-collapse",{staticClass:"card",attrs:{animation:"slide",open:t.isOpen},on:{"update:open":function(e){t.isOpen=e}},scopedSlots:t._u([{key:"trigger",fn:function(e){return[n("div",{staticClass:"card-header",attrs:{role:"button"}},[n("div",{staticClass:"card-header-title"},[n("b-icon",{staticClass:"header-icon",attrs:{icon:e.open?"menu-right":"menu-down"}}),n("span",[t._v(" Subte "+t._s(t.route.line)+" ")])],1),n("a",{staticClass:"card-header-icon",on:{click:function(e){return t.$emit("close")}}},[n("b-icon",{attrs:{icon:"close"}})],1)])]}}])},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"has-text-left"},[n("b-checkbox",{staticClass:"mb-1",attrs:{"native-value":t.route,size:"is-small"},on:{input:t.onRouteSelection},model:{value:t.selectedRoutes,callback:function(e){t.selectedRoutes=e},expression:"selectedRoutes"}},[t._v(" "+t._s(t.route.name)+" ")])],1)])])])},Ct=[],xt={props:{route:{type:Object,default:function(){return{}}}},data:function(){return{isOpen:!0,selectedRoutes:[]}},computed:{},methods:{onRouteSelection:function(){this.$emit("select",this.selectedRoutes)}},watch:{routes:{immediate:!0,handler:function(){var t=this;this.$nextTick((function(){t.selectedRoutes=[t.route],t.onRouteSelection()}))}}}},Lt=xt,Pt=(n("4250"),Object(y["a"])(Lt,_t,Ct,!1,null,null,null)),St=Pt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-collapse",{staticClass:"card",attrs:{animation:"slide",open:t.isOpen},on:{"update:open":function(e){t.isOpen=e}},scopedSlots:t._u([{key:"trigger",fn:function(e){return[n("div",{staticClass:"card-header",attrs:{role:"button"}},[n("div",{staticClass:"card-header-title"},[n("b-icon",{staticClass:"header-icon",attrs:{icon:e.open?"menu-right":"menu-down"}}),n("span",[t._v(" Tren "+t._s(t.line)+" ")])],1),n("a",{staticClass:"card-header-icon",on:{click:function(e){return t.$emit("close")}}},[n("b-icon",{attrs:{icon:"close"}})],1)])]}}])},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[n("div",[n("b",[t._v("Ramales")])]),n("div",{staticClass:"is-flex is-flex-direction-column m-1"},t._l(t.routes,(function(e){return n("div",{key:e.uniqueRouteId,staticClass:"has-text-left"},[n("b-checkbox",{staticClass:"mb-1",attrs:{"native-value":e,size:"is-small"},on:{input:t.onRouteSelection},model:{value:t.selectedRoutes,callback:function(e){t.selectedRoutes=e},expression:"selectedRoutes"}},[n("div",[t._v(" "+t._s(e.branch)+" ")])])],1)})),0)])])])},kt=[],Rt={props:{routes:{type:Array,default:function(){return[]}},line:{type:String,default:""}},data:function(){return{isOpen:!0,selectedRoutes:[]}},computed:{},methods:{onRouteSelection:function(){this.$emit("select",this.selectedRoutes)}},watch:{routes:{immediate:!0,handler:function(){var t=this;this.$nextTick((function(){t.selectedRoutes=[t.routes[0]],t.onRouteSelection()}))}}}},It=Rt,Ot=(n("f4f0"),Object(y["a"])(It,wt,kt,!1,null,null,null)),$t=Ot.exports,Et={components:{BusRoutesCard:yt,SubwayRouteCard:St,TrainRoutesCard:$t},props:{routes:{type:Array,default:function(){return[]}}},data:function(){return{selectedRoutesByKey:{}}},computed:{},methods:{removeLineRoutes:function(t){delete this.selectedRoutesByKey[t],this.emitSelected(),this.$emit("close",t)},changeSelectedRoutes:function(t,e){this.selectedRoutesByKey[e]=t,this.emitSelected()},emitSelected:function(){var t=[];Object.values(this.selectedRoutesByKey).forEach((function(e){t=t.concat(e)})),this.$emit("select",t)}}},Tt=Et,jt=Object(y["a"])(Tt,ft,pt,!1,null,null,null),Mt=jt.exports,Dt={name:"RoutesSection",components:{RoutesCards:Mt},data:function(){return{busLines:[],subwayLines:[],trainLines:[],routes:[],busValue:"none",subwayValue:"none",trainValue:"none"}},methods:{onBusLineSelection:function(t){var e=this;if(t){if(this.$nextTick((function(){return e.busValue="none"})),this.addToFrontIfExists(t,"bus"))return;dt.getBusRoutesForLine(t).then((function(t){var n=t.data;n["type"]="bus",e.routes.unshift(n)})).catch((function(t){return console.log(t)}))}},onSubwayLineSelection:function(t){var e=this;if(t){if(this.$nextTick((function(){return e.subwayValue="none"})),this.addToFrontIfExists(t,"subway"))return;dt.getSubwayRoutesForLine(t).then((function(t){var n=t.data;n["type"]="subway",e.routes.unshift(n)})).catch((function(t){return console.log(t)}))}},onTrainLineSelection:function(t){var e=this;if(t){if(this.$nextTick((function(){return e.trainValue="none"})),this.addToFrontIfExists(t,"train"))return;dt.getTrainRoutesForLine(t).then((function(t){var n=t.data;n["type"]="train",e.routes.unshift(n)})).catch((function(t){return console.log(t)}))}},addToFrontIfExists:function(t,e){var n=this.routes.findIndex((function(n){return n.type+n.line==e+t}));if(n>-1){var s=this.routes[n];return this.routes.splice(n,1),this.routes.unshift(s),!0}return!1},clearRoutes:function(){this.routes=[]},deleteRoute:function(t){var e=this.routes.findIndex((function(e){return e.type+e.line==t}));e>-1&&this.routes.splice(e,1)}},created:function(){var t=this;dt.getLines().then((function(e){t.busLines=e.data.busLines,t.subwayLines=e.data.subwayLines,t.trainLines=e.data.trainLines})).catch((function(t){return console.log(t)}))}},At=Dt,Bt=Object(y["a"])(At,it,at,!1,null,null,null),zt=Bt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-dropdown",{staticClass:"is-flex is-justify-content-right",attrs:{"aria-role":"list"},scopedSlots:t._u([{key:"trigger",fn:function(e){var s=e.active;return[n("a",{class:s?"has-text-primary":"has-text-link"},[n("b-icon",{attrs:{icon:"help-circle-outline",size:"is-small"}}),t._v(" Instrucciones ")],1)]}}])},[n("b-dropdown-item",{staticClass:"info-dropdown has-text-left",attrs:{"aria-role":"listitem"}},[n("div",{staticClass:"has-text-left is-size-7 mb-2"},[t._v(" Escriba una dirección en la forma "),n("b",[t._v("[calle altura]")]),t._v(" o un cruce de calles en la forma "),n("b",[t._v("[calle y calle]")]),t._v(". También puede agregar la ciudad, partido o localidad despues de una coma. "),n("br"),t._v("Ejemplo: "),n("b",[t._v("Corrientes 2000, Caba.")]),t._v(" "),n("br"),t._v("Alternativamente, haga "),n("b",[t._v("Click derecho")]),t._v(" en el mapa en la ubicación deseada. ")])])],1),n("b-field",{attrs:{type:t.startError?"is-danger":"",message:t.startError?t.startError:""}},[n("p",{staticClass:"control"},[n("span",{staticClass:"button is-static"},[t._v("A")])]),n("AddressAutocomplete",{ref:"startPosInput",attrs:{placeholder:"Punto de partida"},on:{select:t.changeStartPoint},model:{value:t.startLocationText,callback:function(e){t.startLocationText=e},expression:"startLocationText"}})],1),n("b-field",{attrs:{type:t.endError?"is-danger":"",message:t.endError?t.endError:""}},[n("p",{staticClass:"control"},[n("span",{staticClass:"button is-static"},[t._v("B")])]),n("AddressAutocomplete",{ref:"endPosInput",attrs:{placeholder:"Punto de llegada"},on:{select:t.changeEndPoint},model:{value:t.endLocationText,callback:function(e){t.endLocationText=e},expression:"endLocationText"}})],1),n("b-button",{on:{click:t.findRoutes}},[t._v("Buscar")]),n("ItineraryList",{staticClass:"mt-3",attrs:{itineraries:t.itineraries},on:{selected:function(e){return t.$emit("update:selectedItinerary",e)}}})],1)},Vt=[],Nt=(n("d3b7"),n("25f0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-autocomplete",{ref:"autocomplete",attrs:{expanded:"",value:t.value,data:t.verifiedData,placeholder:t.placeholder,field:"direccion",loading:t.isFetching},on:{input:function(e){return t.$emit("input",e)},typing:t.getAsyncData,select:function(e){return t.$emit("select",e)}},scopedSlots:t._u([{key:"empty",fn:function(){return[t.isFetching?n("div",[t._v(" Buscando... ")]):t._e()]},proxy:!0},{key:"default",fn:function(e){var s=e.option;return[n("div",{staticStyle:{"white-space":"break-spaces"}},[t._v(" "+t._s(s.direccion)+" ")])]}}])})}),Ut=[],qt=(n("4de4"),"https://servicios.usig.buenosaires.gob.ar/normalizar"),Ht=qt+"",Gt=ct.a.create({baseURL:Ht}),Jt={getSuggestions:function(t){return Gt.get("/?geocodificar=true&direccion=".concat(t))},getDirection:function(t,e){return Gt.get("?lng=".concat(e,"&lat=").concat(t))}},Kt=n("b047c"),Zt=n.n(Kt),Wt={props:{value:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{inp:"",data:[],isFetching:!1}},computed:{verifiedData:function(){return this.data.filter((function(t){return Object.prototype.hasOwnProperty.call(t,"coordenadas")}))}},methods:{getAsyncData:Zt()((function(t){var e=this;t.length?(this.isFetching=!0,Jt.getSuggestions(t).then((function(t){var n=t.data;e.data=[],n.direccionesNormalizadas.forEach((function(t){return e.data.push(t)}))})).catch((function(t){throw e.data=[],t})).finally((function(){e.isFetching=!1}))):this.data=[]}),500),setSelected:function(t){this.$refs.autocomplete.setSelected(t)}}},Xt=Wt,Yt=Object(y["a"])(Xt,Nt,Ut,!1,null,null,null),Qt=Yt.exports,te=n("13ea"),ee=n.n(te),ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.itineraryContent,(function(e,s){return n("b-collapse",{key:s,staticClass:"card",attrs:{animation:"slide",open:t.isOpen==s},on:{open:function(e){return t.openItinerary(s)},close:function(e){return t.closeItinerary(s)}},scopedSlots:t._u([{key:"trigger",fn:function(s){return[n("div",{staticClass:"card-header",attrs:{role:"button"}},[n("div",{staticClass:"card-header-title"},[t._v(" "+t._s(e.header)+" ")]),n("a",{staticClass:"card-header-icon"},[n("b-icon",{attrs:{icon:s.open?"menu-down":"menu-up"}})],1)])]}}],null,!0)},[n("div",{staticClass:"card-content"},t._l(e.steps,(function(e,s){return n("div",{key:s,staticClass:"media"},[n("div",{staticClass:"media-left is-flex is-flex-direction-column is-align-items-center"},[n("b-icon",{attrs:{icon:e.iconClass,size:"is-small"}})],1),n("div",{staticClass:"media-content is-size-7 has-text-left is-flex is-flex-direction-column"},[n("span",[t._v(" "+t._s(e.text)+" ")]),n("span",[t._v(" Distancia: "),n("b",[t._v(t._s(t.formatDistance(e.travelDistance)))])]),e.branches?[n("strong",[t._v(" Ramales: ")]),t._l(e.branches,(function(e,s){return n("span",{key:s},[n("b",[t._v(t._s(e.branch)+" ")]),t._v(" - "+t._s(e.tripSign)+" ")])}))]:t._e()],2)])})),0)])})),1)},se=[],oe=(n("a4d3"),n("e01a"),n("b680"),n("0644")),ie=n.n(oe),ae={foot:{iconClass:"walk",getStepHeader:function(t){return""},getText:function(t){return"Caminar."}},bus:{iconClass:"bus",getStepHeader:function(t){return"Colectivo "+t.busRoute.line},getText:function(t){return"Tomar colectivo linea "+t.busRoute.line+"."}},subway:{iconClass:"subway-variant",getStepHeader:function(t){return"Subte "+t.subwayRoute.line},getText:function(t){return"Tomar subte linea "+t.subwayRoute.line+"."}}},re={props:{itineraries:{type:Array,default:function(){return[]}}},data:function(){return{isOpen:0}},computed:{groupedItineraries:function(){var t={};return this.itineraries.forEach((function(e){Object.prototype.hasOwnProperty.call(t,e.cost)?t[e.cost].push(ie()(e)):t[e.cost]=[ie()(e)]})),t},itineraryContent:function(){var t={},e=this.groupedItineraries;for(var n in e){var s=[];e[n].forEach((function(t){t.steps.forEach((function(t){"bus"==t.type&&s.push({branch:t.busRoute.branch,desc:t.busRoute.description,tripSign:t.busRoute.tripSign})}))}));var o=e[n][0],i="",a=[];o.steps.forEach((function(t){i+=ae[t.type].getStepHeader(t),a.push({iconClass:ae[t.type].iconClass,startLocation:t.startLocation,endLocation:t.endLocation,travelDistance:t.travelDistance,busRoute:t.busRoute,text:ae[t.type].getText(t),branches:"bus"==t.type?s:null})}));var r={header:i,steps:a};t[n]=r}return t}},methods:{formatDistance:function(t){var e=t.toString()+" m";return t>1e3&&(e=(t/1e3).toFixed(1).toString()+" km"),e},openItinerary:function(t){this.isOpen!=t&&(this.isOpen=t,this.$emit("selected",this.groupedItineraries[this.isOpen][0].steps))},closeItinerary:function(t){this.isOpen==t&&(this.isOpen=0,this.$emit("selected",[]))}},watch:{isOpen:function(t){t&&console.log(t)}}},ce=re,ue=Object(y["a"])(ce,ne,se,!1,null,null,null),le=ue.exports,de={name:"ItinerarySection",components:{ItineraryList:le,AddressAutocomplete:Qt},props:{startPos:{type:Object,default:function(){return{}}},endPos:{type:Object,default:function(){return{}}}},data:function(){return{itineraries:[],startLocationText:"",endLocationText:"",selectedStartLocation:{},selectedEndLocation:{},startError:"",endError:""}},computed:{},methods:{changeStartPoint:function(t){t?(this.selectedStartLocation=t,"calle"==t.tipo?(this.startError="Solo ha seleccionado una calle. Indique altura o especifique un cruce de calles",this.$emit("update:startPos",{})):(this.startError="",this.$emit("update:startPos",{lat:t.coordenadas.y,lng:t.coordenadas.x}))):this.$emit("update:startPos",{})},changeEndPoint:function(t){t?(this.selectedEndLocation=t,"calle"==t.tipo?(this.endError="Solo ha seleccionado una calle. Indique altura o especifique un cruce de calles",this.$emit("update:endPos",{})):(this.endError="",this.$emit("update:endPos",{lat:t.coordenadas.y,lng:t.coordenadas.x}))):this.$emit("update:endPos",{})},createUnknownLocation:function(t,e){return{direccion:t.toString()+" "+e.toString(),coordenadas:{x:e,y:t}}},findRoutes:function(){var t=this;this.itineraries=[],this.$emit("update:selectedItinerary",[]),this.startPos.lat&&this.startPos.lng&&this.endPos.lat&&this.endPos.lng&&dt.getItineraries(this.startPos.lat,this.startPos.lng,this.endPos.lat,this.endPos.lng,1e3).then((function(e){return t.itineraries=e.data.itineraries})).catch((function(t){return console.log(t)}))},shouldFetchNewPos:function(t,e){return!ee()(t)&&(ee()(e)||t.lat!=e.coordenadas.y||t.lng!=e.coordenadas.x)}},watch:{startPos:function(t){var e=this;this.shouldFetchNewPos(t,this.selectedStartLocation)&&Jt.getDirection(t.lat,t.lng).then((function(n){e.$refs.startPosInput.setSelected(ee()(n.data)?e.createUnknownLocation(t.lat,t.lng):n.data)})).catch((function(t){return console.log(t)}))},endPos:function(t){var e=this;this.shouldFetchNewPos(t,this.selectedEndLocation)&&Jt.getDirection(t.lat,t.lng).then((function(n){e.$refs.endPosInput.setSelected(ee()(n.data)?e.createUnknownLocation(t.lat,t.lng):n.data)})).catch((function(t){return console.log(t)}))}}},fe=de,pe=(n("8220"),Object(y["a"])(fe,Ft,Vt,!1,null,null,null)),he=pe.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isEmptyPos?n("div",{staticClass:"is-size-6"},[t._v(" Para obtener información de una ubicación, "),n("b",[t._v("Click derecho")]),t._v(' en el mapa y seleccione "Mas información" ')]):[n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Lat ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.infoPos.lat)+" ")])]),n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Lon ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.infoPos.lng)+" ")])]),t.closeLines.busLines&&t.closeLines.busLines.length?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Colectivos ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.closeLines.busLines.join(", "))+" ")])]):t._e(),t.closeLines.subwayLines&&t.closeLines.subwayLines.length?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Subte ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.closeLines.subwayLines.join(", "))+" ")])]):t._e(),t.closeLines.trainLines&&t.closeLines.trainLines.length?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Trenes ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.closeLines.trainLines.join(", "))+" ")])]):t._e(),t.loading?n("div",[n("i",{staticClass:"mdi mdi-loading icn-spinner"})]):t.errorMsg?n("div",{staticClass:"is-size-7"},[t._v(" "+t._s(t.errorMsg)+" ")]):[t.locationData.address.road?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Calle ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.locationData.address.road)+" ")])]):t._e(),t.locationData.address.house_number?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Número ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.locationData.address.house_number)+" ")])]):t._e(),t.locationData.address.postcode?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Cod. Postal ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.locationData.address.postcode)+" ")])]):t._e(),t.locationData.address.state_district?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Localidad ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.locationData.address.suburb)+" - "+t._s(t.locationData.address.state_district)+" ")])]):t._e(),t.locationData.address.state?n("div",{staticClass:"columns mb-0"},[n("div",{staticClass:"column is-4 has-text-weight-bold has-text-right"},[t._v(" Ciudad ")]),n("div",{staticClass:"column has-text-left"},[t._v(" "+t._s(t.locationData.address.state)+" ")])]):t._e()]]],2)},ve=[],be="https://nominatim.openstreetmap.org",ge=be+"",ye=ct.a.create({baseURL:ge,timeout:4e3}),_e={reverseGeosearch:function(t,e){return ye.get("/reverse?lat=".concat(t,"&lon=").concat(e,"&format=json&accept-language=es"))}},Ce={props:{infoPos:{type:Object,default:function(){return{}}}},data:function(){return{locationData:{},closeLines:{},loading:!1,errorMsg:""}},computed:{isEmptyPos:function(){return ee()(this.infoPos)}},methods:{},watch:{infoPos:function(t){var e=this;this.loading=!0,_e.reverseGeosearch(t.lat,t.lng).then((function(t){e.locationData=t.data,e.loading=!1,e.errorMsg=""})).catch((function(t){e.loading=!1,e.errorMsg="No se pudo obtener más información. Intente nuevamente.",console.log(t)})),dt.getLinesCloseTo(t.lat,t.lng).then((function(t){e.closeLines=t.data})).catch((function(t){e.closestLines={},console.log(t)}))}}},xe=Ce,Le=(n("bc13"),Object(y["a"])(xe,me,ve,!1,null,null,null)),Pe=Le.exports,Se={name:"Home",components:{ContextMenu:C,ContextMenuItem:k,Map:V,MapRoutes:Y,MapItinerary:ot,RoutesSection:zt,ItinerarySection:he,InformationSection:Pe},props:{sectionIndex:{type:Number,default:0}},data:function(){return{selectedRoutes:[],startPos:{},endPos:{},infoPos:{},selectedItinerary:[]}},methods:{setStartPosMenu:function(t){this.startPos=t,this.$refs.menu.close(),this.$emit("update:sectionIndex",1)},setEndPosMenu:function(t){this.endPos=t,this.$refs.menu.close(),this.$emit("update:sectionIndex",1)},setInfoPosMenu:function(t){this.infoPos=t,this.$refs.menu.close(),this.$emit("update:sectionIndex",2)},clearAll:function(){this.startPos={},this.endPos={},this.infoPos={},this.$refs.menu.close()}},mounted:function(){var t=document.getElementById("menu");document.firstElementChild.appendChild(t)}},we=Se,ke=(n("cccb"),Object(y["a"])(we,l,d,!1,null,null,null)),Re=ke.exports,Ie={components:{Home:Re},data:function(){return{sectionIndex:0}}},Oe=Ie,$e=(n("034f"),Object(y["a"])(Oe,c,u,!1,null,null,null)),Ee=$e.exports,Te=n("8c4f");r["a"].use(Te["a"]);var je=[{path:"/",name:"Home",component:Re},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Me=new Te["a"]({routes:je}),De=Me,Ae=n("2f62");r["a"].use(Ae["a"]);var Be=new Ae["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ze=(n("6cc5"),n("289d"));n("5abe");delete O["Icon"].Default.prototype._getIconUrl,O["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")}),r["a"].config.productionTip=!1,r["a"].use(ze["a"]),new r["a"]({router:De,store:Be,render:function(t){return t(Ee)}}).$mount("#app")},"5ced":function(t,e,n){},"602a":function(t,e,n){"use strict";n("0361")},"659e":function(t,e,n){},"760c":function(t,e,n){},8220:function(t,e,n){"use strict";n("760c")},"85ec":function(t,e,n){},"892b":function(t,e,n){"use strict";n("bcaf")},"991c":function(t,e,n){},a1a3:function(t,e,n){"use strict";n("b901")},a586:function(t,e,n){},aac3:function(t,e,n){},b2cf:function(t,e,n){"use strict";n("aac3")},b901:function(t,e,n){},bc13:function(t,e,n){"use strict";n("eb12")},bcaf:function(t,e,n){},cccb:function(t,e,n){"use strict";n("5ced")},eb12:function(t,e,n){},f4f0:function(t,e,n){"use strict";n("659e")},f6c9:function(t,e,n){},fc57:function(t,e,n){"use strict";n("991c")}});
//# sourceMappingURL=app.ba0e25b9.js.map